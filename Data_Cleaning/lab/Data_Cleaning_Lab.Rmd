---
title: "Data Cleaning Lab"
output: html_document
editor_options: 
  chunk_output_type: console
---

# Data used

Bike Lanes Dataset: BikeBaltimore is the Department of Transportation's bike program. 
The data is from http://data.baltimorecity.gov/Transportation/Bike-Lanes/xzfj-gyms

You can Download as a CSV in your current working directory.  Note its also available at: 	http://jhudatascience.org/intro_to_r/data/Bike_Lanes.csv 

```{r}
library(readr)
library(tidyverse)
library(dplyr)
library(lubridate)
library(jhur)
library(tidyverse)
library(broom)
library(naniar)

bike = read_csv(
  "http://jhudatascience.org/intro_to_r/data/Bike_Lanes.csv")
```

# Part 1

1.  Count the number of rows of the bike data and count the number of complete cases of the bike data.  Use `sum` and `complete.cases`.
```{r}


```

2.  Create a data set called `namat` which is equal to `is.na(bike)`.  
What is the class of `namat`?  Run colSums on `namat.`
These represent the number of missing values in the columns of
`bike`. 
```{r}

```

3.  Filter rows of bike that are NOT missing the `route` variable, assign
this to the object `have_route.`  Create a table of the `subType` using `table`, 
including the missing `subType`s. 

```{r}
#have_route = ??? %>%  filter(???(route))
```

4. 

a. Use `naniar` to make a visual of the amount of data missing for each variable of `bike` (use `naniar::gg_miss_var()`).
```{r}


```


b. What is the percent complete for `subType` of `bike` ? Hint: use another `naniar` function.
 
```{r}

```

# Part 2

**New Data set**
Now imagine we work in a clinic and we are trying to understand more about blood types of patients. 

Let's say we imported the data like so:
```{r}
BloodType <- tibble(gender = 
                    c("M", "Male", "Female", "F", "M", 
                      "Male", "F", "M", "F", "M", 
                      "F", "Man", "NA", "Man", "female"), 
                    type = c("A.-", "AB.+", "O.-", "O.+", "AB.-",
                               "B.+", "B.-", "o.-", "O.+", "A.-",
                              "A.+", "O.-", "B.-", "o.+", "AB.-"),
                    infection = c("Yes", "No", "Yes", "No", "No",
                                  "No", "Yes", "No", "Yes", "No",
                                  "No", "Yes", "Yes", "Yes", "Yes"))

BloodType
```

There are some issues with this data that we need to figure out!

5. Recode the `gender` variable of the `BloodType` data so that it is consistent.

```{r}
# BloodType <- ??? %>%
#  mutate(??? = recode(gender, ? = "Male", ? = "Male", ?= "Male",
#                                ? = "Female", ? = "Female"))

```

Check to see that `gender` only has NA values, the value you used males, and the value you used for females.

```{r}
# BloodType %>% pull(???) %>% ???(useNA = "ifany")
```

6. Recode the `type` variable of the `BloodType` data to be consistent.
```{r}
#BloodType <- BloodType %>%
#  ???(??? = ???(type, "o.-" = "O.-", "o.+" = "O.+"))
```

Check to see that `type` only has only these possible values:
 "A.-","A.+", "AB.-", "AB.+", "B-","B+", "O.-", "O.+"

```{r}

```

7. Make a new tibble of `BloodType` called `Bloodtype_split` that splits the `type` variable into two called `blood_type` and  `Rhfactor` separating by the period. (Note periods are special characters that generally are interpreted as wild cards thus we need `\\` to tell R that we want it to be interpreted as a period.)
```{r}
#BloodType_split  <- BloodType %>% ???(type, ??? = c("blood_type", "Rhfactor"), sep = "\\.")
```

8. a. How many observations are there for each `Rhfactor`:
```{r}
# ??? %>%pull(Rhfactor) %>% ???
```

b. Filtering for patients with type O, how many had the infection?
```{r}
#??? %>%
#  ???(blood_type ??? "O") %>%
#  pull(???) %>%
#  table()

```
