---
title: "factor_example"
output: html_document
---

# Why factors are cool!

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

First we will create some data about absences for different students. Each row is a different student. We have information about the number of days absent and the grade for the individual students. We will use the `tibble()` function to create the data. We will use the `sample()` function to create a random sequence of numbers from 0 to 7 with replacements for 32 hypothetical students. Since there are four grades and 8*4 is 32, we will repeat the grade values 8 times. We use the `set.seed()` function so that the random sample from 0 to 7 is the same each time the code is run.

```{r}
set.seed(123)
data_highschool <- tibble(absences = sample(0:7, size = 32, replace = TRUE), grade = rep(c("Sophomore","Freshman",  "Junior", "Senior"), 8))
data_highschool
```

Notice that `grade` is a `chr` variable. This indicates that the values are character strings. R does not realize that there is any order related to the `grade` values. However, we know that the order is: freshman, sophomore, junior, senior.

Let's make a plot first:

```{r}
data_highschool %>%
  ggplot(mapping = aes(x = grade, y = absences)) +
  geom_boxplot()
```

OK this is very useful, but it is a bit difficult to read, because we expect the values to be plotted by the order that we know, not by alphabetical order. Currently `grade` is class `character` but let's change that to class `factor` which allows us to specify the levels or order of the values.

```{R}
class(data_highschool$grade)
data_highschool_fct <- data_highschool %>% 
  mutate(grade = factor(grade, levels = c("Freshman", "Sophomore", "Junior", "Senior")))
data_highschool_fct
```

Now let's make our plot again:

```{r}
data_highschool_fct %>%
  ggplot(mapping = aes(x = grade, y = absences)) +
  geom_boxplot()
```


Now that's more like it! Notice how the data is automatically plotted in the order we would like.

What about if we arrange the two versions of our data by grade?
```{r}
data_highschool %>% arrange(grade)
data_highschool_fct %>% arrange(grade)
```


Again notice that the order is not what we would hope for with the first version, but it is for the second version!

Now what about results from some calculations.

```{r}
data_highschool %>% group_by(grade) %>% summarise(mean = mean(absences))

data_highschool_fct %>% group_by(grade) %>% summarise(mean = mean(absences))
```

Here we see that the mean is calculated in the order we would like only for the version of the data that has absences coded as a factor!
