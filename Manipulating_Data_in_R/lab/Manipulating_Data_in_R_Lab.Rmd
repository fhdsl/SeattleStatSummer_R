---
title: "Manipulating Data in R Lab Key"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r}
library(readr)
library(dplyr)
library(ggplot2)
library(tidyr)
library(stringr)
```

# Part 1

1.  Read in the Wide Bike lanes data: http://jhudatascience.org/intro_to_r/data/Bike_Lanes_Wide.csv .  Name the data set `wide`. Note the `NA`s here!

```{r}
# ??? = read_csv(???)

```

2. Reshape `wide` using `pivot_longer.`  Call this data `long.`  Make the `names_to`
`lanetype`, and the values `the_length.`  Make sure we pivot all columns **but**
`name`, using `!name`. Note the `NA`s here:

```{r}
# ??? = ??? %>% 
#   pivot_longer(???, names_to = ???, values_to = ???)

```

3. read in the roads and crashes CSVs.  Call them `crash` and `road`
`crash`: http://jhudatascience.org/intro_to_r/Manipulating_Data_in_R/lab/crashes.csv
`road`: http://jhudatascience.org/intro_to_r/Manipulating_Data_in_R/lab/roads.csv

(This exercise is motivated by https://anythingbutrbitrary.blogspot.com/2012/08/manipulating-data-frames-using-sqldf.html)

```{r}
# ??? = read_csv(???)
# ??? = read_csv(???)

```

4.  Replace (using `str_replace`) any hyphens (`-`) with a space in the `Road` column. Call this data `crash2`. Use `table()` to look at the `Road` column.  
```{r}
# ??? = ??? %>% 
#   mutate(??? = str_replace(???, ???, ???))
# table(???)

```

5. How many observations are in each dataset?
```{r}
# dim(???)
# dim(???)

```

6. Select all the columns from `crash2` except `Volume` using the `!` and `select()`. Then use `pivot_wider()` to make the dataset wide, turning the column `Year` into many columns. The data in these new columns should come from `N_Crashes`. Call the new data `wide_crash2`. What are the column names now?

```{r}
# ??? = ??? %>%
#   select(???) %>%
#   pivot_wider(names_from = ???, values_from = ???)
# colnames(???)

```


# Part 2

7. Join data to retain only complete data, (using an inner join) e.g. those observations with road lengths and districts.  Merge without using `by` argument, then merge using `by = "Road"`. call the output `merged.`  How many observations are there?

```{r}
# ??? = inner_join(???, ???)
# ??? = inner_join(???, ???, by = ???)
# nrow(???)

```

8. Join data using a `full_join.`  Call the output `full.`   How many observations are there?

```{r}
# ??? = full_join(???, ???)

```

9. Do a left join of the `road` and `crash`.  ORDER matters here!  How many observations are there?

```{r}
# ??? = left_join(???, ???)

```

10. Repeat above with a `right_join` with the same order of the arguments. How many observations are there?

```{r}
# ??? = right_join(???, ???)

```
